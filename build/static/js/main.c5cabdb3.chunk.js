(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(33),c=n(34),o=n(5),l=n(1),s=n(50),i=n(2);var d=function(e){var t=e.categories,n=e.selectedCategory,a=e.onCategoryChange,r=e.setMode,c=e.selectedMode;return Object(i.jsx)("nav",{className:"navbar navbar-expand-lg bg-primary navbar-dark",children:Object(i.jsxs)("div",{className:"container-fluid",children:[Object(i.jsx)("ul",{className:"navbar-nav",style:{opacity:"enroll"!=c?0:1,pointerEvents:"enroll"!=c?"none":"auto"},children:Object(i.jsxs)("li",{className:"nav-item dropdown",children:[Object(i.jsx)("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:n}),Object(i.jsx)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink",children:t.filter((function(e){return e!==n})).map((function(e){return Object(i.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(){return a(e)},children:e},e)}))})]})}),Object(i.jsx)("ul",{className:"navbar-nav mx-auto",children:Object(i.jsx)("li",{className:"nav-item",children:Object(i.jsx)("a",{className:"nav-link",href:"#",onClick:function(){return r("enroll")},children:"Home"})})}),Object(i.jsx)("ul",{className:"navbar-nav navbar-right",children:Object(i.jsxs)("li",{className:"nav-item dropdown ms-auto dropleft",children:[Object(i.jsx)("a",{className:"nav-link dropdown-toggle ",href:"#",id:"navbarDropdownMenuLink",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Account"}),Object(i.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink",children:[Object(i.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(){r("my")},children:"My Listings"}),Object(i.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(){r("enrolled")},children:"Enrolled Listings"}),Object(i.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(){s.a.get("https://matchup-ut3b.onrender.com:3001/logout",{withCredentials:!0}).then((function(e){200===e.status&&(window.location.href="./login")})).catch((function(e){console.error("Error signing out:",e)}))},children:"Sign Out"})]})]})})]})})};var u=function(e){var t,n=e.onDateChange,r=new Date,c=r.getDate(),o=r.getMonth()+1,s=r.getFullYear(),d=[],u="".concat(c,".").concat(o,".").concat(s);for(t=0;t<=10;t++){var j="".concat(c+t,".").concat(o,".").concat(s);d.push(j)}var b=Object(a.useState)(u),h=Object(l.a)(b,2),p=h[0],O=h[1];return Object(i.jsx)("div",{className:"date-selector-row",children:Object(i.jsx)("div",{className:"col-12 text-center",children:Object(i.jsxs)("div",{className:"dropdown show",children:[Object(i.jsx)("a",{className:"dropdown-toggle",href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:p||u}),Object(i.jsx)("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuLink",children:d.map((function(e,t){return Object(i.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(){O(e),n(e)},children:e},t)}))})]})})})};var j=function(e){for(var t=e.selectedMode,n=e.handleEnroll,a=e.listingData,r=a.sport_id,c=a.location,o=a.time,l=a.price,s=a.skill_level,d=a.num_players,u=a.enrolled_players,j=[],b=0;b<5;b++)b<s?j.push(1):j.push(0);var h=new Date,p="enroll"===t,O=new Date(o)<=h;return Object(i.jsx)("div",{className:"card",children:"reviews"!==t&&Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsx)("h5",{className:"card-title",children:function(e){switch(e){case 1:return"Football";case 2:return"Basketball";case 3:return"Volleyball";case 4:return"Handball";default:return null}}(r)}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col-12",children:c}),Object(i.jsxs)("div",{className:"col-12",children:[Object(i.jsx)("div",{children:new Date(o).toLocaleDateString()}),Object(i.jsx)("div",{children:new Date(o).toLocaleTimeString()})]}),Object(i.jsx)("div",{className:"col-12",children:0===l?"FREE":"".concat(l," \u20ac")}),Object(i.jsxs)("div",{className:"col-12",children:["Skill Group ",Object(i.jsx)("br",{}),j.map((function(e,t){return Object(i.jsx)("i",{className:t<s?"fas fa-star":"far fa-star"},t)}))]}),p&&Object(i.jsxs)("div",{className:"col-12",children:[Object(i.jsx)("button",{className:"btn btn-primary",onClick:n,children:"Enroll"}),Object(i.jsx)("div",{className:"col-12",children:"".concat(u,"/").concat(d)})]}),p&&O&&Object(i.jsx)("div",{className:"col-12",children:Object(i.jsx)("div",{children:"".concat(u,"/").concat(d)})}),"my"===t&&Object(i.jsx)("div",{className:"col-12",children:"".concat(u,"/").concat(d)})]})]})})},b=(n(47),n(32)),h=["places"],p=function(e){var t=e.apiKey,n=e.onLocationSelect,r=Object(a.useState)(null),c=Object(l.a)(r,2),o=c[0],s=c[1],d=Object(b.b)({googleMapsApiKey:t,libraries:h}),u=d.isLoaded;if(d.loadError)return"Error loading maps";if(!u)return"Loading maps";return Object(i.jsx)("div",{children:Object(i.jsx)(b.a,{onLoad:function(e){return s(e)},onPlaceChanged:function(){if(o){var e=o.getPlace();e&&e.name&&n(e.name)}},children:Object(i.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter location",onFocus:function(e){return e.target.select()},required:!0})})})},O=n(12),m=function(e){var t=Object(a.useState)(1),n=Object(l.a)(t,2),r=n[0],c=n[1],o="star-selector "+e.className;return Object(i.jsxs)("div",{className:o,children:[Object(i.jsx)("input",{type:"hidden",name:"hiddenValue",value:r}),Object(i.jsx)("div",{className:"star-label",children:e.children}),Object(O.a)(Array(5)).map((function(t,n){return Object(i.jsx)("span",{onClick:function(){return c(t=n+1),void e.onStarsChange(t);var t},children:n<r?Object(i.jsx)("i",{className:"fas fa-star"}):Object(i.jsx)("i",{className:"far fa-star"})},n)}))]})},g=function(e){var t=e.isOpen,n=e.closeDialog,r=e.loggedUserId,c=Object(a.useState)("Football"),o=Object(l.a)(c,2),d=o[0],u=o[1],j=Object(a.useState)(1),b=Object(l.a)(j,2),h=b[0],O=b[1],g=Object(a.useState)(1),f=Object(l.a)(g,2),v=f[0],x=f[1],w=Object(a.useState)(""),N=Object(l.a)(w,2),y=N[0],C=N[1],S=Object(a.useState)(""),k=Object(l.a)(S,2),E=k[0],D=k[1],M=Object(a.useState)(""),L=Object(l.a)(M,2),F=L[0],q=L[1],A=Object(a.useState)(""),I=Object(l.a)(A,2),B=I[0],P=I[1],V=Object(a.useState)(null),H=Object(l.a)(V,2),R=H[0],_=H[1],T=r;return Object(i.jsx)("div",{children:t&&Object(i.jsx)("div",{className:"dialog-overlay",children:Object(i.jsxs)("div",{className:"dialog-content",children:[Object(i.jsx)("h3",{children:"Create a listing"}),Object(i.jsxs)("select",{id:"sports",name:"sports",className:"form-control sport-select",value:d,onChange:function(e){var t=e.target.value;u(t),"Football"===t?O(1):"Basketball"===t?O(2):"Volleyball"===t?O(3):"Handball"===t&&O(4)},children:[Object(i.jsx)("option",{value:"Football",children:"Football"}),Object(i.jsx)("option",{value:"Basketball",children:"Basketball"}),Object(i.jsx)("option",{value:"Volleyball",children:"Volleyball"}),Object(i.jsx)("option",{value:"Handball",children:"Handball"})]}),Object(i.jsx)(m,{className:"skillGroupSelect",onStarsChange:function(e){x(e)}}),Object(i.jsx)(p,{apiKey:"AIzaSyAjqMqKlnq_taZcPrgqJjSN-JgZddRrP8c",onLocationSelect:function(e){_(e)}}),Object(i.jsx)("input",{type:"datetime-local",className:"form-control",value:y,onChange:function(e){return C(e.target.value)},required:!0}),Object(i.jsx)("input",{type:"number",className:"form-control",id:"price",name:"price",min:"0",step:"1",placeholder:"Enter Price in EUR",value:E,onChange:function(e){return D(e.target.value)},required:!0}),Object(i.jsx)("input",{type:"number",className:"form-control",id:"noPeople",name:"noPeople",min:"2",max:"50",step:"1",placeholder:"Enter the number of people",value:F,onChange:function(e){return q(e.target.value)},required:!0}),Object(i.jsx)("textarea",{className:"form-control",rows:"3",placeholder:"Additional information (not mandatory)",value:B,onChange:function(e){return P(e.target.value)}}),Object(i.jsx)("div",{className:"row text-center",children:Object(i.jsx)("input",{type:"submit",className:"btn btn-primary submit-button",onClick:function(){s.a.post("https://matchup-ut3b.onrender.com:3001/listings/create",{creatorId:T,sportId:h,skillLevel:v,dateTime:y,price:E,noPeople:F,additionalInfo:B,location:R},{withCredentials:!0}).then((function(e){201===e.status?(alert(e.data.message),n()):e.data.message?alert(e.data.message):alert("An error occurred while creating the listing.")})).catch((function(e){console.error("Error during listing creation:",e)}))}})}),Object(i.jsx)("button",{className:"btn-close btn btn-primary",onClick:n,children:"Close"})]})})})},f=["Football","Basketball","Volleyball","Handball"];function v(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear(),c="".concat(t,".").concat(n,".").concat(r),o=Object(a.useState)(null),b=Object(l.a)(o,2),h=b[0],p=b[1],O=Object(a.useState)(null),m=Object(l.a)(O,2),v=m[0],x=m[1],w=Object(a.useState)(!1),N=Object(l.a)(w,2),y=N[0],C=N[1],S=Object(a.useState)("Football"),k=Object(l.a)(S,2),E=k[0],D=k[1],M=Object(a.useState)("enroll"),L=Object(l.a)(M,2),F=L[0],q=L[1],A=Object(a.useState)(c),I=Object(l.a)(A,2),B=I[0],P=I[1],V=Object(a.useState)(!1),H=Object(l.a)(V,2),R=H[0],_=H[1];function T(e){var t=e.split("."),n=t[0],a=t[1],r=t[2];return new Date(Date.UTC(r,a-1,n)).toISOString().split("T")[0]}function J(e){switch(e){case"Football":return 1;case"Basketball":return 2;case"Volleyball":return 3;case"Handball":return 4;default:return null}}Object(a.useEffect)((function(){s.a.get("https://matchup-ut3b.onrender.com:3001/login",{withCredentials:!0}).then((function(e){!1===e.data.loggedIn?window.location.href="./login":(console.log(e.data.user[0]),p(e.data.user[0].id),_(!0),D(function(e){switch(e){case 1:return"Football";case 2:return"Basketball";case 3:return"Volleyball";case 4:return"Handball";default:return null}}(e.data.user[0].fav_sport_id)))})).catch((function(e){console.error("Error checking login status:",e)}))}),[]),Object(a.useEffect)((function(){R&&s.a.get("https://matchup-ut3b.onrender.com:3001/listings/".concat(F,"/").concat(h),{params:"enroll"===F?{dateTime:T(B),sportId:J(E)}:{},withCredentials:!0}).then((function(e){e.status,x(e.data)})).catch((function(e){x(null),console.error("Error fetching user's listings:",e)}))}),[R,F,B,E,y]);return Object(i.jsxs)("div",{children:[Object(i.jsx)(d,{categories:f,selectedCategory:E,onCategoryChange:D,setMode:q,onDateChange:P,selectedMode:F}),"enroll"===F||"my"===F?Object(i.jsxs)("div",{className:"text-center listing-options-row",children:[Object(i.jsx)("button",{className:"btn btn-primary create-listing-button",onClick:function(){C(!0)},children:"Create a Listing"}),"enroll"===F&&Object(i.jsx)(u,{selectedDate:B,onDateChange:P})]}):null,Object(i.jsxs)("div",{className:"container-fluid text-center",children:[null!==v&&Array.isArray(v)?v.map((function(e){return Object(i.jsx)(j,{handleEnroll:function(){return t=e.id,void s.a.post("https://matchup-ut3b.onrender.com:3001/listings/enroll/".concat(t),{userId:h},{withCredentials:!0}).then((function(e){201===e.status&&x((function(e){return e.filter((function(e){return e.id!==t}))}))})).catch((function(e){alert("error while enrolling"),console.error("Error while enrolling into listing",e)}));var t},selectedMode:F,listingData:e},e.id)})):Object(i.jsx)("p",{children:"You have no listings."}),Object(i.jsx)(g,{isOpen:y,closeDialog:function(){C(!1)},loggedUserId:h})]})]})}var x=function(e){var t=e.options,n=e.selectedOption,r=e.onChange,c=Object(a.useState)(n),o=Object(l.a)(c,2),s=o[0],d=o[1];return Object(i.jsxs)("div",{className:"dropdown",children:[Object(i.jsx)("button",{className:"dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:n}),Object(i.jsx)("input",{type:"hidden",name:"hiddenValue",value:s}),Object(i.jsx)("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton",children:t.map((function(e,t){return Object(i.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(){return function(e){d(e),r(e)}(e)},children:e},t)}))})]})};var w,N=function(e){var t=Object(a.useState)("Football"),n=Object(l.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(""),d=Object(l.a)(o,2),u=d[0],j=d[1],b=Object(a.useState)(""),h=Object(l.a)(b,2),p=h[0],O=h[1],g=Object(a.useState)(""),f=Object(l.a)(g,2),v=f[0],w=f[1],N=Object(a.useState)(""),y=Object(l.a)(N,2),C=y[0],S=y[1],k=Object(a.useState)(""),E=Object(l.a)(k,2),D=E[0],M=E[1],L=["Football","Basketball","Volleyball","Handball"],F=Object(a.useState)(1),q=Object(l.a)(F,2),A=q[0],I=q[1],B=Object(a.useState)(1),P=Object(l.a)(B,2),V=P[0],H=P[1];return Object(i.jsxs)("form",{className:"form",children:[!1===e.registered&&Object(i.jsxs)("div",{children:[Object(i.jsx)("input",{type:"text",placeholder:"Name",value:u,onChange:function(e){return j(e.target.value)},pattern:"[A-Za-z\\s]+",required:!0}),Object(i.jsx)("input",{type:"text",placeholder:"Surname",value:p,onChange:function(e){return O(e.target.value)},pattern:"[A-Za-z\\s]+",required:!0}),Object(i.jsx)("input",{type:"tel",placeholder:"Phone Number",value:v,onChange:function(e){return w(e.target.value)},required:!0}),Object(i.jsx)(x,{options:L,selectedOption:r,onChange:function(e){c(e);var t=L.indexOf(e)+1;H(t)}}),Object(i.jsx)(m,{onStarsChange:function(e){I(e)},children:"Your skill group"})]}),Object(i.jsx)("input",{type:"email",placeholder:"Email",value:C,onChange:function(e){return S(e.target.value)},required:!0}),Object(i.jsx)("input",{type:"password",placeholder:"Password",value:D,onChange:function(e){return M(e.target.value)},required:!0}),Object(i.jsx)("button",{type:"button",onClick:function(){e.registered?s.a.post("https://matchup-ut3b.onrender.com:3001/login",{email:C,password:D},{withCredentials:!0}).then((function(e){if(200==e.status){var t="".concat(window.location.origin,"/");window.location.href=t}else e.data.message?alert(e.data.message):alert("An error occurred during login.")})).catch((function(e){console.error("Error during login:",e),alert("Wrong credidentials")})):s.a.post("https://matchup-ut3b.onrender.com:3001/register",{name:u,lastName:p,email:C,phoneNum:v,skillLevel:A,favSportId:V,password:D},{withCredentials:!0}).then((function(t){200==t.status?e.setRegistered(!0):t.data.message?alert(t.data.message):alert("An error occurred during registration. Try again")}))},className:"btn btn-primary",children:e.registered?"Login":"Register"}),e.registered&&Object(i.jsx)("div",{className:"row",children:Object(i.jsx)("button",{onClick:function(){return e.setRegistered(!1)},className:"btn btn-primary forgot-pass",children:"Create an account"})})]})};"/login"===(null===(w=window)||void 0===w?void 0:w.location.pathname)&&n(48);var y=function(){Object(a.useEffect)((function(){s.a.get("https://matchup-ut3b.onrender.com:3001/login",{withCredentials:!0}).then((function(e){if(!0===e.data.loggedIn){var t="".concat(window.location.origin,"/");console.log(t),window.location.href=t}})).catch((function(e){console.error("Error checking login status:",e)}))}),[]);var e=Object(a.useState)(!0),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(i.jsx)("div",{className:"container login",children:Object(i.jsx)(N,{registered:n,setRegistered:r})})};var C=function(){return Object(i.jsx)(c.a,{children:Object(i.jsxs)(o.c,{children:[Object(i.jsx)(o.a,{path:"/",element:Object(i.jsx)(v,{})}),Object(i.jsx)(o.a,{path:"/login",element:Object(i.jsx)(y,{})})]})})},S=document.getElementById("root");Object(r.createRoot)(S).render(Object(i.jsx)(a.StrictMode,{children:Object(i.jsx)(C,{})}))}},[[49,1,2]]]);
//# sourceMappingURL=main.c5cabdb3.chunk.js.map