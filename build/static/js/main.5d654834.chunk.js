(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(33),r=a(34),l=a(5),o=a(1),s=a(50),i=a(2);var d=function(e){var t=e.categories,a=e.selectedCategory,n=e.onCategoryChange,c=e.setMode,r=e.selectedMode;return Object(i.jsx)("nav",{className:"navbar navbar-expand-lg bg-primary navbar-dark",children:Object(i.jsxs)("div",{className:"container-fluid",children:[Object(i.jsx)("ul",{className:"navbar-nav",style:{opacity:"enroll"!=r?0:1,pointerEvents:"enroll"!=r?"none":"auto"},children:Object(i.jsxs)("li",{className:"nav-item dropdown",children:[Object(i.jsx)("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:a}),Object(i.jsx)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink",children:t.filter((function(e){return e!==a})).map((function(e){return Object(i.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(){return n(e)},children:e},e)}))})]})}),Object(i.jsx)("ul",{className:"navbar-nav mx-auto",children:Object(i.jsx)("li",{className:"nav-item",children:Object(i.jsx)("a",{className:"nav-link",href:"#",onClick:function(){return c("enroll")},children:"Home"})})}),Object(i.jsx)("ul",{className:"navbar-nav navbar-right",children:Object(i.jsxs)("li",{className:"nav-item dropdown ms-auto dropleft",children:[Object(i.jsx)("a",{className:"nav-link dropdown-toggle ",href:"#",id:"navbarDropdownMenuLink",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Account"}),Object(i.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink",children:[Object(i.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(){c("my")},children:"My Listings"}),Object(i.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(){c("enrolled")},children:"Enrolled Listings"}),Object(i.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(){s.a.get("https://ill-red-puppy-cap.cyclic.cloud/logout",{withCredentials:!0}).then((function(e){200===e.status&&(window.location.href="./login")})).catch((function(e){console.error("Error signing out:",e)}))},children:"Sign Out"})]})]})})]})})};var u=function(e){var t,a=e.onDateChange,c=new Date,r=c.getDate(),l=c.getMonth()+1,s=c.getFullYear(),d=[],u="".concat(r,".").concat(l,".").concat(s);for(t=0;t<=10;t++){var j="".concat(r+t,".").concat(l,".").concat(s);d.push(j)}var b=Object(n.useState)(u),p=Object(o.a)(b,2),h=p[0],O=p[1];return Object(i.jsx)("div",{className:"date-selector-row",children:Object(i.jsx)("div",{className:"col-12 text-center",children:Object(i.jsxs)("div",{className:"dropdown show",children:[Object(i.jsx)("a",{className:"dropdown-toggle",href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:h||u}),Object(i.jsx)("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuLink",children:d.map((function(e,t){return Object(i.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(){O(e),a(e)},children:e},t)}))})]})})})};var j=function(e){for(var t=e.selectedMode,a=e.handleEnroll,n=e.listingData,c=n.sport_id,r=n.location,l=n.time,o=n.price,s=n.skill_level,d=n.num_players,u=n.enrolled_players,j=[],b=0;b<5;b++)b<s?j.push(1):j.push(0);var p=new Date,h="enroll"===t,O=new Date(l)<=p;return Object(i.jsx)("div",{className:"card",children:"reviews"!==t&&Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsx)("h5",{className:"card-title",children:function(e){switch(e){case 1:return"Football";case 2:return"Basketball";case 3:return"Volleyball";case 4:return"Handball";default:return null}}(c)}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col-12",children:r}),Object(i.jsxs)("div",{className:"col-12",children:[Object(i.jsx)("div",{children:new Date(l).toLocaleDateString()}),Object(i.jsx)("div",{children:new Date(l).toLocaleTimeString()})]}),Object(i.jsx)("div",{className:"col-12",children:0===o?"FREE":"".concat(o," \u20ac")}),Object(i.jsxs)("div",{className:"col-12",children:["Skill Group ",Object(i.jsx)("br",{}),j.map((function(e,t){return Object(i.jsx)("i",{className:t<s?"fas fa-star":"far fa-star"},t)}))]}),h&&Object(i.jsxs)("div",{className:"col-12",children:[Object(i.jsx)("button",{className:"btn btn-primary",onClick:a,children:"Enroll"}),Object(i.jsx)("div",{className:"col-12",children:"".concat(u,"/").concat(d)})]}),h&&O&&Object(i.jsx)("div",{className:"col-12",children:Object(i.jsx)("div",{children:"".concat(u,"/").concat(d)})}),"my"===t&&Object(i.jsx)("div",{className:"col-12",children:"".concat(u,"/").concat(d)})]})]})})},b=(a(47),a(32)),p=["places"],h=function(e){var t=e.apiKey,a=e.onLocationSelect,c=Object(n.useState)(null),r=Object(o.a)(c,2),l=r[0],s=r[1],d=Object(b.b)({googleMapsApiKey:t,libraries:p}),u=d.isLoaded;if(d.loadError)return"Error loading maps";if(!u)return"Loading maps";return Object(i.jsx)("div",{children:Object(i.jsx)(b.a,{onLoad:function(e){return s(e)},onPlaceChanged:function(){if(l){var e=l.getPlace();e&&e.name&&a(e.name)}},children:Object(i.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter location",onFocus:function(e){return e.target.select()},required:!0})})})},O=a(12),g=function(e){var t=Object(n.useState)(1),a=Object(o.a)(t,2),c=a[0],r=a[1],l="star-selector "+e.className;return Object(i.jsxs)("div",{className:l,children:[Object(i.jsx)("input",{type:"hidden",name:"hiddenValue",value:c}),Object(i.jsx)("div",{className:"star-label",children:e.children}),Object(O.a)(Array(5)).map((function(t,a){return Object(i.jsx)("span",{onClick:function(){return r(t=a+1),void e.onStarsChange(t);var t},children:a<c?Object(i.jsx)("i",{className:"fas fa-star"}):Object(i.jsx)("i",{className:"far fa-star"})},a)}))]})},m=function(e){var t=e.isOpen,a=e.closeDialog,c=e.loggedUserId,r=Object(n.useState)("Football"),l=Object(o.a)(r,2),d=l[0],u=l[1],j=Object(n.useState)(1),b=Object(o.a)(j,2),p=b[0],O=b[1],m=Object(n.useState)(1),f=Object(o.a)(m,2),v=f[0],x=f[1],w=Object(n.useState)(""),y=Object(o.a)(w,2),N=y[0],C=y[1],S=Object(n.useState)(""),k=Object(o.a)(S,2),E=k[0],D=k[1],M=Object(n.useState)(""),L=Object(o.a)(M,2),F=L[0],q=L[1],A=Object(n.useState)(""),I=Object(o.a)(A,2),B=I[0],P=I[1],V=Object(n.useState)(null),H=Object(o.a)(V,2),R=H[0],_=H[1],T=c;return Object(i.jsx)("div",{children:t&&Object(i.jsx)("div",{className:"dialog-overlay",children:Object(i.jsxs)("div",{className:"dialog-content",children:[Object(i.jsx)("h3",{children:"Create a listing"}),Object(i.jsxs)("select",{id:"sports",name:"sports",className:"form-control sport-select",value:d,onChange:function(e){var t=e.target.value;u(t),"Football"===t?O(1):"Basketball"===t?O(2):"Volleyball"===t?O(3):"Handball"===t&&O(4)},children:[Object(i.jsx)("option",{value:"Football",children:"Football"}),Object(i.jsx)("option",{value:"Basketball",children:"Basketball"}),Object(i.jsx)("option",{value:"Volleyball",children:"Volleyball"}),Object(i.jsx)("option",{value:"Handball",children:"Handball"})]}),Object(i.jsx)(g,{className:"skillGroupSelect",onStarsChange:function(e){x(e)}}),Object(i.jsx)(h,{apiKey:"AIzaSyAjqMqKlnq_taZcPrgqJjSN-JgZddRrP8c",onLocationSelect:function(e){_(e)}}),Object(i.jsx)("input",{type:"datetime-local",className:"form-control",value:N,onChange:function(e){return C(e.target.value)},required:!0}),Object(i.jsx)("input",{type:"number",className:"form-control",id:"price",name:"price",min:"0",step:"1",placeholder:"Enter Price in EUR",value:E,onChange:function(e){return D(e.target.value)},required:!0}),Object(i.jsx)("input",{type:"number",className:"form-control",id:"noPeople",name:"noPeople",min:"2",max:"50",step:"1",placeholder:"Enter the number of people",value:F,onChange:function(e){return q(e.target.value)},required:!0}),Object(i.jsx)("textarea",{className:"form-control",rows:"3",placeholder:"Additional information (not mandatory)",value:B,onChange:function(e){return P(e.target.value)}}),Object(i.jsx)("div",{className:"row text-center",children:Object(i.jsx)("input",{type:"submit",className:"btn btn-primary submit-button",onClick:function(){s.a.post("https://ill-red-puppy-cap.cyclic.cloud/listings/create",{creatorId:T,sportId:p,skillLevel:v,dateTime:N,price:E,noPeople:F,additionalInfo:B,location:R},{withCredentials:!0}).then((function(e){201===e.status?(alert(e.data.message),a()):e.data.message?alert(e.data.message):alert("An error occurred while creating the listing.")})).catch((function(e){console.error("Error during listing creation:",e)}))}})}),Object(i.jsx)("button",{className:"btn-close btn btn-primary",onClick:a,children:"Close"})]})})})},f=["Football","Basketball","Volleyball","Handball"];function v(){var e=new Date,t=e.getDate(),a=e.getMonth()+1,c=e.getFullYear(),r="".concat(t,".").concat(a,".").concat(c),l=Object(n.useState)(null),b=Object(o.a)(l,2),p=b[0],h=b[1],O=Object(n.useState)(null),g=Object(o.a)(O,2),v=g[0],x=g[1],w=Object(n.useState)(!1),y=Object(o.a)(w,2),N=y[0],C=y[1],S=Object(n.useState)("Football"),k=Object(o.a)(S,2),E=k[0],D=k[1],M=Object(n.useState)("enroll"),L=Object(o.a)(M,2),F=L[0],q=L[1],A=Object(n.useState)(r),I=Object(o.a)(A,2),B=I[0],P=I[1],V=Object(n.useState)(!1),H=Object(o.a)(V,2),R=H[0],_=H[1];function T(e){var t=e.split("."),a=t[0],n=t[1],c=t[2];return new Date(Date.UTC(c,n-1,a)).toISOString().split("T")[0]}function J(e){switch(e){case"Football":return 1;case"Basketball":return 2;case"Volleyball":return 3;case"Handball":return 4;default:return null}}Object(n.useEffect)((function(){s.a.get("https://ill-red-puppy-cap.cyclic.cloud/login",{withCredentials:!0}).then((function(e){!1===e.data.loggedIn?window.location.href="./login":(console.log(e.data.user[0]),h(e.data.user[0].id),_(!0),D(function(e){switch(e){case 1:return"Football";case 2:return"Basketball";case 3:return"Volleyball";case 4:return"Handball";default:return null}}(e.data.user[0].fav_sport_id)))})).catch((function(e){console.error("Error checking login status:",e)}))}),[]),Object(n.useEffect)((function(){R&&s.a.get("https://ill-red-puppy-cap.cyclic.cloud/listings/".concat(F,"/").concat(p),{params:"enroll"===F?{dateTime:T(B),sportId:J(E)}:{},withCredentials:!0}).then((function(e){e.status,x(e.data)})).catch((function(e){x(null),console.error("Error fetching user's listings:",e)}))}),[R,F,B,E,N]);return Object(i.jsxs)("div",{children:[Object(i.jsx)(d,{categories:f,selectedCategory:E,onCategoryChange:D,setMode:q,onDateChange:P,selectedMode:F}),"enroll"===F||"my"===F?Object(i.jsxs)("div",{className:"text-center listing-options-row",children:[Object(i.jsx)("button",{className:"btn btn-primary create-listing-button",onClick:function(){C(!0)},children:"Create a Listing"}),"enroll"===F&&Object(i.jsx)(u,{selectedDate:B,onDateChange:P})]}):null,Object(i.jsxs)("div",{className:"container-fluid text-center",children:[null!==v&&Array.isArray(v)?v.map((function(e){return Object(i.jsx)(j,{handleEnroll:function(){return t=e.id,void s.a.post("https://ill-red-puppy-cap.cyclic.cloud/listings/enroll/".concat(t),{userId:p},{withCredentials:!0}).then((function(e){201===e.status&&x((function(e){return e.filter((function(e){return e.id!==t}))}))})).catch((function(e){alert("error while enrolling"),console.error("Error while enrolling into listing",e)}));var t},selectedMode:F,listingData:e},e.id)})):Object(i.jsx)("p",{children:"You have no listings."}),Object(i.jsx)(m,{isOpen:N,closeDialog:function(){C(!1)},loggedUserId:p})]})]})}var x=function(e){var t=e.options,a=e.selectedOption,c=e.onChange,r=Object(n.useState)(a),l=Object(o.a)(r,2),s=l[0],d=l[1];return Object(i.jsxs)("div",{className:"dropdown",children:[Object(i.jsx)("button",{className:"dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:a}),Object(i.jsx)("input",{type:"hidden",name:"hiddenValue",value:s}),Object(i.jsx)("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton",children:t.map((function(e,t){return Object(i.jsx)("a",{className:"dropdown-item",href:"#",onClick:function(){return function(e){d(e),c(e)}(e)},children:e},t)}))})]})};var w,y=function(e){var t=Object(n.useState)("Football"),a=Object(o.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(""),d=Object(o.a)(l,2),u=d[0],j=d[1],b=Object(n.useState)(""),p=Object(o.a)(b,2),h=p[0],O=p[1],m=Object(n.useState)(""),f=Object(o.a)(m,2),v=f[0],w=f[1],y=Object(n.useState)(""),N=Object(o.a)(y,2),C=N[0],S=N[1],k=Object(n.useState)(""),E=Object(o.a)(k,2),D=E[0],M=E[1],L=["Football","Basketball","Volleyball","Handball"],F=Object(n.useState)(1),q=Object(o.a)(F,2),A=q[0],I=q[1],B=Object(n.useState)(1),P=Object(o.a)(B,2),V=P[0],H=P[1];return Object(i.jsxs)("form",{className:"form",children:[!1===e.registered&&Object(i.jsxs)("div",{children:[Object(i.jsx)("input",{type:"text",placeholder:"Name",value:u,onChange:function(e){return j(e.target.value)},pattern:"[A-Za-z\\s]+",required:!0}),Object(i.jsx)("input",{type:"text",placeholder:"Surname",value:h,onChange:function(e){return O(e.target.value)},pattern:"[A-Za-z\\s]+",required:!0}),Object(i.jsx)("input",{type:"tel",placeholder:"Phone Number",value:v,onChange:function(e){return w(e.target.value)},required:!0}),Object(i.jsx)(x,{options:L,selectedOption:c,onChange:function(e){r(e);var t=L.indexOf(e)+1;H(t)}}),Object(i.jsx)(g,{onStarsChange:function(e){I(e)},children:"Your skill group"})]}),Object(i.jsx)("input",{type:"email",placeholder:"Email",value:C,onChange:function(e){return S(e.target.value)},required:!0}),Object(i.jsx)("input",{type:"password",placeholder:"Password",value:D,onChange:function(e){return M(e.target.value)},required:!0}),Object(i.jsx)("button",{type:"button",onClick:function(){e.registered?s.a.post("https://ill-red-puppy-cap.cyclic.cloud/login",{email:C,password:D},{withCredentials:!0}).then((function(e){if(200==e.status){var t="".concat(window.location.origin,"/");window.location.href=t}else e.data.message?alert(e.data.message):alert("An error occurred during login.")})).catch((function(e){console.error("Error during login:",e),alert("Wrong credidentials")})):s.a.post("https://ill-red-puppy-cap.cyclic.cloud/register",{name:u,lastName:h,email:C,phoneNum:v,skillLevel:A,favSportId:V,password:D},{withCredentials:!0}).then((function(t){200==t.status?e.setRegistered(!0):t.data.message?alert(t.data.message):alert("An error occurred during registration. Try again")}))},className:"btn btn-primary",children:e.registered?"Login":"Register"}),e.registered&&Object(i.jsx)("div",{className:"row",children:Object(i.jsx)("button",{onClick:function(){return e.setRegistered(!1)},className:"btn btn-primary forgot-pass",children:"Create an account"})})]})};"/login"===(null===(w=window)||void 0===w?void 0:w.location.pathname)&&a(48);var N=function(){Object(n.useEffect)((function(){s.a.get("https://ill-red-puppy-cap.cyclic.cloud/login",{withCredentials:!0}).then((function(e){if(!0===e.data.loggedIn){var t="".concat(window.location.origin,"/");console.log(t),window.location.href=t}})).catch((function(e){console.error("Error checking login status:",e)}))}),[]);var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(i.jsx)("div",{className:"container login",children:Object(i.jsx)(y,{registered:a,setRegistered:c})})};var C=function(){return Object(i.jsx)(r.a,{children:Object(i.jsxs)(l.c,{children:[Object(i.jsx)(l.a,{path:"/",element:Object(i.jsx)(v,{})}),Object(i.jsx)(l.a,{path:"/login",element:Object(i.jsx)(N,{})})]})})},S=document.getElementById("root");Object(c.createRoot)(S).render(Object(i.jsx)(n.StrictMode,{children:Object(i.jsx)(C,{})}))}},[[49,1,2]]]);
//# sourceMappingURL=main.5d654834.chunk.js.map